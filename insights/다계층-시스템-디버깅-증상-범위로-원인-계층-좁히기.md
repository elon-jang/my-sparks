---
id: "1739836800-a3f7"
title: "다계층 시스템 디버깅: 증상 범위로 원인 계층 좁히기"
category: "insights"
tags: [claude-code, plugin, debugging]
created: "2026-02-18T10:00:00+09:00"
source: "From blog post"
blog_link: "blog/2026-02-18-Plugin-중복-에러-settings-json이-범인이었다.md"
confidence: 3
connections: []
review_count: 0
last_reviewed: null
---

# 다계층 시스템 디버깅: 증상 범위로 원인 계층 좁히기

> **Blog**: [Plugin 중복 에러, settings.json이 범인이었다](../blog/2026-02-18-Plugin-중복-에러-settings-json이-범인이었다.md)

## Core Insight

여러 계층(로컬 → 캐시 → 전역 설정)이 겹치는 시스템에서 버그가 발생하면, **증상의 재현 범위**가 원인의 계층을 알려준다.

- 특정 디렉토리에서만 발생 → 로컬 계층 (자동 감지, 프로젝트 설정)
- 특정 조건에서만 발생 → 중간 계층 (캐시, 빌드 아티팩트)
- **어디서든 발생** → 전역 계층 (글로벌 설정, 환경 변수)

## Key Points

1. **범위 먼저 특정하라**: "다른 환경에서도 재현되는가?"라는 질문 하나가 가설 절반을 제거한다
2. **비교 대상을 찾아라**: 같은 구조인데 문제가 없는 항목(disk-cleaner, snapkin)과 비교하면 차이점이 드러난다
3. **설정 파일의 잔여물을 의심하라**: 한 번 등록된 설정은 원인을 제거해도 자동으로 사라지지 않는다. `settings.json`, `config.json` 등 영구 저장소에 유령 항목이 남을 수 있다

## Q&A

**Q1: 플러그인 시스템에서 동일 이름의 플러그인이 두 번 로드되는 원인은?**

A: 자동 감지(로컬)와 마켓플레이스 설치(전역)가 동시에 동작하면서, 이전에 자동 감지로 등록된 설정(`1password@1password`)이 전역 settings.json에 잔존했기 때문. 존재하지 않는 마켓플레이스를 참조하여 에러 발생.

**Q2: "다른 디렉토리에서도 동일 에러 발생"이라는 관찰이 왜 결정적이었나?**

A: 자동 감지는 현재 디렉토리 기반이므로, 다른 디렉토리에서도 재현된다는 것은 로컬 원인이 아니라 전역 원인임을 증명한다. 이 한 가지 관찰로 가설 범위가 "전역 설정"으로 좁혀졌다.

**Q3: 같은 구조의 다른 플러그인(disk-cleaner)에 문제가 없었던 이유는?**

A: disk-cleaner는 처음부터 마켓플레이스로만 설치했기 때문에 `@disk-cleaner` 형태의 자동 감지 잔여가 settings.json에 없었다. 1password만 자동 감지 → 마켓플레이스 설치 순서를 거치면서 잔여 항목이 생겼다.
